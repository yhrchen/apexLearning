{\rtf1\ansi\ansicpg1252\cocoartf2576
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 ArialMT;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red246\green246\blue246;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;\cssrgb\c97255\c97255\c97255;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs22\fsmilli11360 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 @isTest\'a0public\'a0class\'a0AutoCompleteTaskTest\'a0\{\
\
\'a0\'a0\'a0\'a0@isTest\'a0static\'a0void\'a0withRelatedTasks()\'a0\{\
\'a0\'a0\'a0\'a0//\'a0Create\'a0a\'a0bulk\'a0of\'a0new\'a0Leads\
\'a0\'a0\'a0\'a0\'a0\'a0List<Lead>\'a0newLeads\'a0=\'a0new\'a0List<Lead>();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for(Integer\'a0i\'a0=\'a00\'a0;\'a0i\'a0<\'a0200\'a0;\'a0i++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Lead\'a0myLead\'a0=\'a0new\'a0Lead();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myLead.LastName\'a0=\'a0'Galbraith'\'a0+\'a0i;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myLead.Company\'a0=\'a0'Cormoron'\'a0+\'a0i;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myLead.Status\'a0=\'a0'Open\'a0-\'a0Not\'a0Contacted';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newLeads.add(myLead);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0insert\'a0newLeads;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Create\'a0a\'a0bulk\'a0of\'a0new\'a0Tasks\
\'a0\'a0\'a0\'a0\'a0\'a0List<Task>\'a0newTasks\'a0=\'a0new\'a0List<Task>();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for(Integer\'a0i\'a0=\'a00\'a0;\'a0i\'a0<\'a0200\'a0;\'a0i++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0j\'a0=\'a00\'a0;\'a0j\'a0<\'a02\'a0;\'a0j++)\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Task\'a0myTask\'a0=\'a0new\'a0Task();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myTask.WhoId\'a0=\'a0newLeads[i].Id;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myTask.Status\'a0=\'a0'Not\'a0Started';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0myTask.OwnerId\'a0=\'a0UserInfo.getUserId();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newTasks.add(myTask);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0insert\'a0newTasks;\
\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0Test.startTest();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Update\'a0Lead\'a0status\
\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0i\'a0=\'a00\'a0;\'a0i\'a0<\'a0200\'a0;\'a0i++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newLeads.get(i).status\'a0=\'a0'Closed\'a0-\'a0Converted';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0update\'a0newLeads;\
\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Query\'a0the\'a0latest\'a0records\
\'a0\'a0\'a0\'a0\'a0\'a0List<Task>\'a0updatedTasks\'a0=\'a0[SELECT\'a0WhoId,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Status\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Task\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0WhoId\'a0IN\'a0:newLeads];\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Assert!\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Task\'a0t\'a0:\'a0updatedTasks)\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.assertEquals('Completed',\'a0t.Status);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\}\
\}}