{\rtf1\ansi\ansicpg1252\cocoartf2576
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 ArialMT;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red246\green246\blue246;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;\cssrgb\c97255\c97255\c97255;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs22\fsmilli11360 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 @isTest\'a0public\'a0class\'a0CallableContactsTest\'a0\{\
\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0@isTest\'a0static\'a0void\'a0accountsContactsWithPhone()\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Test\'a01:\'a0Test\'a0when\'a0inserting\'a0new\'a0Contacts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a01.1:\'a0Set\'a0up\'a020\'a0new\'a0Accounts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Account>\'a0newAccounts\'a0=\'a0new\'a0List<Account>\'a0();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0i\'a0=\'a00\'a0;\'a0i\'a0<\'a020\'a0;\'a0i++)\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Account\'a0newAcc\'a0=\'a0new\'a0Account();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newAcc.Name\'a0=\'a0'Disney';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newAccounts.add(newAcc);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0insert\'a0newAccounts;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0//1.2:\'a0Create\'a0random\'a0number\'a0of\'a0Contacts\'a0associated\'a0with\'a0each\'a0account\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Contact>\'a0newContacts\'a0=\'a0new\'a0List<Contact>\'a0();\
\'a0\'a0\'a0\'a0Integer\'a0randomNumber\'a0=\'a0Integer.valueOf(math.random()*100+1);\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0j\'a0=\'a00\'a0;\'a0j\'a0<\'a020\'a0;\'a0j++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Account\'a0relatedAccount\'a0=\'a0newAccounts.get(j);\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0k\'a0=\'a00\'a0;\'a0k\'a0<\'a0randomNumber\'a0;\'a0k++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Contact\'a0newContact\'a0=\'a0new\'a0Contact();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newContact.LastName\'a0=\'a0'Walter';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newContact.Phone\'a0=\'a0'31322299';\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newContact.AccountId\'a0=\'a0relatedAccount.Id;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0newContacts.add(newContact);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0insert\'a0newContacts;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('The\'a0randomNumber\'a0is\'a0'\'a0+\'a0randomNumber);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Test.startTest();\
\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a01.3:\'a0Get\'a0the\'a0latest\'a0results\'a0on\'a0Account\'a0records\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Account>\'a0updatedAccountsInfo\'a0=\'a0[SELECT\'a0Id,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Callable_Contacts__c,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0(SELECT\'a0Id\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Contacts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Phone\'a0!=\'a0null)\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Account\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Id\'a0IN\'a0:newAccounts];\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('The\'a0first\'a0entry\'a0in\'a0updatedAccountInfo\'a0is\'a0'\'a0+\'a0updatedAccountsInfo.get(0));\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a01.4:\'a0Assert\'a0the\'a0Callable\'a0Contacts\'a0field\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Account\'a0testAccounts\'a0:\'a0updatedAccountsInfo)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.assertEquals(testAccounts.Contacts.size(),\'a0testAccounts.Callable_Contacts__c);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a0Test\'a02:\'a0Test\'a0when\'a0deleting\'a0Contacts\'a0\
\'a0\'a0\'a0\'a0Integer\'a0randomNumber2\'a0=\'a0Integer.valueOf(math.floor(Integer.valueOf(math.random()*10)+1));\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('The\'a0randomNumber2\'a0is\'a0'\'a0+\'a0randomNumber2);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a02.1:\'a0Query\'a0random\'a0number\'a0of\'a0Contacts\'a0on\'a0each\'a0Account\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Account>\'a0ContactsByAccounts\'a0=\'a0[SELECT\'a0Id,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0(SELECT\'a0Id\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Contacts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Phone\'a0!=\'a0null\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0LIMIT\'a0:randomNumber2)\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Account\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Id\'a0IN\'a0:newAccounts];\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('The\'a0newAccounts\'a0List\'a0size\'a0is\'a0'\'a0+\'a0newAccounts.size());\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('There\'a0are\'a0'\'a0+\'a0ContactsByAccounts.get(0).Contacts.size()\'a0+\'a0'\'a0contacts\'a0in\'a0the\'a0first\'a0record\'a0in\'a0ContactsByAccounts');\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a02.2:\'a0Delete\'a0the\'a0selected\'a0Contacts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Contact>\'a0contactsToDelete\'a0=\'a0new\'a0List<Contact>();\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Integer\'a0m\'a0=\'a00\'a0;\'a0m\'a0<\'a020\'a0;\'a0m++)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Contact\'a0contactToDelete\'a0:\'a0ContactsByAccounts.get(m).Contacts)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0contactsToDelete.add(contactToDelete);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.debug('There\'a0are\'a0'\'a0+\'a0contactsToDelete.size()\'a0+\'a0'\'a0contacts\'a0to\'a0be\'a0deleted.');\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0delete\'a0contactsToDelete;\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a02.3:\'a0Get\'a0the\'a0latest\'a0results\'a0on\'a0Account\'a0records\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0List<Account>\'a0updatedAccountsInfo2\'a0=\'a0[SELECT\'a0Id,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0Callable_Contacts__c,\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0(SELECT\'a0Id\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Contacts\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Phone\'a0!=\'a0null)\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0FROM\'a0Account\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0WHERE\'a0Id\'a0IN\'a0:newAccounts];\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0//\'a02.4:\'a0Assert\'a0the\'a0Callable\'a0Contacts\'a0field\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0for\'a0(Account\'a0testAccounts\'a0:\'a0updatedAccountsInfo2)\'a0\{\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0System.assertEquals(testAccounts.Contacts.size(),\'a0testAccounts.Callable_Contacts__c);\
\'a0\'a0\'a0\'a0\'a0\'a0\'a0\'a0\}\
\'a0\'a0\'a0\'a0Test.stopTest();\
\'a0\'a0\'a0\'a0\}\
\}}